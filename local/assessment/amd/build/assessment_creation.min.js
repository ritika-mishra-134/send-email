define(["jquery","core/ajax","core/str","sweetalert2","select2-js"],function(a,b,c,d){return{init:function(){c.get_strings([{key:"namerequired",component:"local_assessment"},{key:"emailrequired",component:"local_assessment"},{key:"logorequired",component:"local_assessment"},{key:"descrptionrequired",component:"local_assessment"},{key:"validemail",component:"local_assessment"},{key:"enterapiendpoint",component:"local_assessment"},{key:"entertoken",component:"local_assessment"}]).done(function(c){a("#sso").select2({allowClear:!0}),a("#payment").select2({allowClear:!0}),a("#subpayment").select2({allowClear:!0}),a("#assessment_creation").on("click",function(d){var e=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(d.preventDefault(),""==a("#name").val().trim())return a("#nameRequired").html(c[0]).css({color:"red"}),!1;if(""==a("#description").val().trim())return a("#descriptionRequired").html(c[3]).css({color:"red"}),!1;if(""==a("#logo").val())return a("#logoRequired").html(c[2]).css({color:"red"}),!1;if(""==a("#email").val().trim())return a("#emailRequired").html(c[1]).css({color:"red"}),!1;if(!e.test(a("#email").val().trim()))return a("#emailRequired").html(c[4]).css({color:"red"}),!1;if(null!==a("#payment").val()&&""==a("#api_endponit").val()||null!==a("#payment").val()&&""==a("#token").val())return""==a("#api_endponit").val()?(a("#apirequired").html(c[5]).css({color:"red"}),!1):""!=a("#token").val().trim()||(a("#tokenrequired").html(c[6]).css({color:"red"}),!1);var f=b.call([{methodname:"local_assessment_assessment_creation",args:{name:a("#name").val().trim(),description:a("#description").val().trim(),sso:null===a("#sso").val()?"":a("#sso").val(),payment:null===a("#payment").val()?"":a("#payment").val(),subpayment:null===a("#subpayment").val()?"":a("#subpayment").val(),logo:a("#logo").val().trim(),email:a("#email").val(),apiendpoint:a("#api_endponit").val()||"",apitoken:a("#token").val()||""}}]);f[0].done(function(b){if(1==b.status)a("#assesmentForm").submit();else{var c=a("<div class='alert alert-danger'>"+b.message+"</div>");a("#assessment_form").prepend(c)}}).fail(function(){})}),a("#payment").on("change",function(){var b=a(this).val(),c=a("#subpayment"),d=a("#api_endponit"),e=a("#token");""===b?(c.prop("disabled",!0),d.prop("disabled",!0),e.prop("disabled",!0)):(c.prop("disabled",!1),d.prop("disabled",!1),e.prop("disabled",!1))})})}}});